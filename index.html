<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Email Extractor</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous">
        <style>
        @media (min-width: 310px) and (max-width: 767px) {
            .headd-btn {
                display: none !important;
            }

            .litds {
                padding-top: 50px 0px;
            }
        }

        @font-face {
            font-family: poppins;
        }

        h1.h2,
        h3,
        h4,
        h5,
        h6,
        p,
        span,
        a,
        li {
            font-family: poppins;
        }

        body {
            background-color: #f2f4f8;
        }

        textarea {
            width: 100%;
            height: 300px;
        }

        button {
            padding: 0.1em 0.25em;
            width: 13em;
            height: 4.2em;
            background-color: #047bf8;
            border: 0.08em solid #b1b1b1;
            border-radius: 0.3em;
            font-size: 12px;
            cursor: pointer;
            margin-top: 10px;
        }

        button span {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            bottom: 0.4em;
            width: 8.25em;
            height: 2.5em;
            background-color: #047bf8;
            border-radius: 0.2em;
            font-size: 1.5em;
            color: #fff;
            border: 0.08em solid #fff;
            box-shadow: 0 0.4em 0.1em 0.019em #fff;
        }

        button span:hover {
            transition: all 0.5s;
            transform: translate(0, 0.4em);
            box-shadow: 0 0 0 0 #fff;
        }

        button span:not(hover) {
            transition: all 1s;
        }

        .mainn {
            padding: 50px 0px 20px 0px;
        }

        .mainn2 {
            background-color: #fff;
            padding: 60px 0px;
        }

        .mainn2 p {
            color: #a2a2a2;
            font-size: 16px;
            font-family: poppins;
        }

        .scrl::-webkit-scrollbar {
            width: 10px;
        }

        /* Track */
        .scrl::-webkit-scrollbar-track {
            background: #eeeeee;
        }

        /* Handle */
        .scrl::-webkit-scrollbar-thumb {
            background: #047bf8;
        }

        /* Handle on hover */
        .scrl::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .scrl {
            margin: auto;
            overflow: auto;
            height: 400px;
        }

        .headd-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 50px;
            position: relative;
            padding: 0 20px;
            font-size: 18px;
            text-transform: uppercase;
            border: 0;
            box-shadow: hsl(210deg 87% 36%) 0px 7px 0px 0px;
            background-color: hsl(210deg 100% 44%);
            border-radius: 12px;
            overflow: hidden;
            transition: 31ms cubic-bezier(.5, .7, .4, 1);
        }

        .headd-btn:before {
            content: attr(alt);
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            inset: 0;
            font-size: 15px;
            font-weight: bold;
            color: white;
            letter-spacing: 4px;
            opacity: 1;
        }

        .headd-btn:active {
            box-shadow: none;
            transform: translateY(7px);
            transition: 35ms cubic-bezier(.5, .7, .4, 1);
        }

        .headd-btn:hover:before {
            transition: all .0s;
            transform: translateY(100%);
            opacity: 0;
        }

        .headd-btn i {
            color: white;
            font-size: 15px;
            font-weight: bold;
            letter-spacing: 4px;
            font-style: normal;
            transition: all 2s ease;
            transform: translateY(-20px);
            opacity: 0;
        }

        .headd-btn:hover i {
            transition: all .2s ease;
            transform: translateY(0px);
            opacity: 1;
        }

        .headd-btn:hover i:nth-child(1) {
            transition-delay: 0.045s;
        }

        .headd-btn:hover i:nth-child(2) {
            transition-delay: calc(0.045s * 3);
        }

        .headd-btn:hover i:nth-child(3) {
            transition-delay: calc(0.045s * 4);
        }

        .headd-btn:hover i:nth-child(4) {
            transition-delay: calc(0.045s * 5);
        }

        .headd-btn:hover i:nth-child(6) {
            transition-delay: calc(0.045s * 6);
        }

        .headd-btn:hover i:nth-child(7) {
            transition-delay: calc(0.045s * 7);
        }

        .headd-btn:hover i:nth-child(8) {
            transition-delay: calc(0.045s * 8);
        }

        .headd-btn:hover i:nth-child(9) {
            transition-delay: calc(0.045s * 9);
        }

        .headd-btn:hover i:nth-child(10) {
            transition-delay: calc(0.045s * 10);
        }
    </style>
    </head>

    <body>
        <header class="p-3 text-white" style="background-color: #047bf8;">
            <div class="container">
                <div
                    class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                    <a href="/"
                        class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                        <svg class="bi me-2" width="40" height="32" role="img"
                            aria-label="Bootstrap">
                            <use xlink:href="#bootstrap"></use>
                        </svg>
                    </a>

                    <ul
                        class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                        <!-- <li><a href="#" class="nav-link px-2 text-white">Home</a></li> -->
                        <img src="Logo.png" width="200" alt>
                    </ul>

                    <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
                        <!-- <input type="search" class="form-control form-control-dark" placeholder="Search..." aria-label="Search"> -->
                        <button class="headd-btn" alt="Contact us">
                            <i>C</i>
                            <i>o</i>
                            <i>n</i>
                            <i>T</i>
                            <i>a</i>
                            <i>c</i>
                            <i>T</i>
                            <i>&nbsp;</i>
                            <i>u</i>
                            <i>s</i>
                        </button>
                    </form>

                </div>
            </div>
        </header>

        <div class="container">
            <div class="mainn">
                <div class="row">
                    <div class="col-sm-12">

                        <div class="row">
                            <div class="col-sm-12 col-md-6 col-lg-6">
                                <h2 style="color: #000; font-family: poppins;">Upload
                                    Content</h2>
                            </div>

                            <div class="col-sm-12 col-md-6 col-lg-6">
                                <div class="float-end">
                                    <div style="margin-bottom: 10px;">
                                        <h2 id="emailCount" style="color: #25a17d; font-size: 22px; font-weight: 700;"></h2>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <form id="uploadForm">
                            
                            <textarea id="content"
                                placeholder="Paste your content here"></textarea><br>
                            
                            <div class="row">
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <button type="submit">
                                        <span>Extract Emails</span>
                                    </button>
                                </div>

                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <div class="float-end">
                                        <button id="downloadButton"
                                            style="display: none;">
                                            <span>Download Emails</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="mainn2">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <h2 style="color: #000; font-family: poppins;">How it
                            Works</h2>
                        <p>
                            Have you ever needed to retrieve email addresses
                            from a text document, a website's source code,
                            or a file? To obtain a clean list of distinct email
                            addresses, just enter your source text
                            content that contains the email addresses in the
                            text box that is supplied and click the
                            "Extract Emails" button.

                            With ease, DeBounce Email Extractor can extract
                            important email addresses from any type of
                            information and combine them into a single, simply
                            navigable list. The web program Email
                            Extractor is freeware all in one. This lightweight
                            and strong utility is made to retrieve email
                            addresses from a variety of sources, including local
                            files, websites, search engines, and more.

                            After the extraction process is complete, you may
                            import the emails into your sending software
                            by exporting them as a.TXT file. Additionally,
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <footer style="background-color: #f2f4f8; padding: 20px 0px;">
            <div class="container">
                <h2
                    style="color: #a2a2a2; font-size: 16px; text-align: center; font-family: poppins;">Copyright
                    © 2024 by <a href="https://innoversol.com/"> InnoverSol.</a>
                    All Rights Reserved</h2>
            </div>
        </footer>

        <script>
        document.getElementById("uploadForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent form submission

            var content = document.getElementById("content").value;
            var extractedEmails = content.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);

            if (extractedEmails) {
                        // Display count of email addresses found
                var countMessage = extractedEmails.length + " EMAIL ADDRESSES FOUND.";
                document.getElementById("emailCount").innerText = countMessage;

                // Show download button
                var downloadButton = document.getElementById("downloadButton");
                downloadButton.style.display = "block";

                // Display emails with numbering in the textarea
                var numberedEmails = extractedEmails.map(function(email, index) {
                    return (index + 1) + ". " + email;
                });
                document.getElementById("content").value = numberedEmails.join("\n");
            } else {
                alert("No emails found.");
            }
        });
        function extractEmails(text) {
            var emails = text.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);
            return emails;
        }
        document.getElementById("uploadForm").addEventListener("submit", async function(event) {
            event.preventDefault(); // Prevent form submission

            var content = document.getElementById("content").value;
            var extractedEmails = extractEmails(content);

            console.log(extractedEmails.length)

            var emailList = document.getElementById("content");
            emailList.innerHTML = ""; // Clear previous emails

            if (extractedEmails) {
                extractedEmails.forEach(function(email) {
                    var listItem = document.createElement("li");
                    listItem.textContent = email;
                    emailList.appendChild(listItem);
                });

                // Send emails to the server
                try {
                    const response = await fetch('http://localhost:3000/saveEmails', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ emails: extractedEmails })
                    });

                    if (response.ok) {
                        console.log('Emails saved successfully');
                    } else {
                        console.log('Failed to save emails');
                    }
                } catch (error) {
                    console.error('Error:', error);
                }
            } else {
                var listItem = document.createElement("li");
                listItem.textContent = "No emails found.";
                emailList.appendChild(listItem);
            }
        });

        document.getElementById("downloadButton").addEventListener("click", function() {
            var content = document.getElementById("content").value;

            var blob = new Blob([content], {
                type: 'text/plain'
            });
            var anchor = document.createElement('a');
            anchor.download = "extracted_emails.txt";
            anchor.href = window.URL.createObjectURL(blob);
            anchor.target = "_blank";
            anchor.style.display = "none"; // just to be safe
            document.body.appendChild(anchor);
            anchor.click();
            document.body.removeChild(anchor);
        });
    </script>
    <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
    </body>

</html>
